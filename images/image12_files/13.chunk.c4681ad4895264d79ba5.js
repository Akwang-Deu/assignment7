/*! For license information please see 13.chunk.c4681ad4895264d79ba5.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{437:function(t,e,i){"use strict";e.a=function(t,e){return t<0?(e+t%e)%e:t%e}},441:function(t,e,i){"use strict";i.d(e,"a",(function(){return u})),i.d(e,"b",(function(){return d}));var s=i(2),n=i(0),r=i.n(n),o=i(324),a=i(437),h=i(4),l=i(621);var u,d,p=r.a.forwardRef((function(t,e){var{children:i}=t,o=Object(h.__rest)(t,["children"]);const a=Object(l.a)(o),{ref:u}=a,d=Object(h.__rest)(a,["ref"]),p=Object(n.useRef)(null);return Object(n.useEffect)((()=>{u(p.current),e&&("current"in e&&(e.current=p.current),"function"==typeof e&&e(p.current))}),[e,u]),r.a.createElement(s.styled.Div,Object.assign({},d,{ref:p}),i)}));!function(t){t[t.Default=0]="Default",t[t.Gentle=1]="Gentle",t[t.Banner=2]="Banner",t[t.MediaCarousel=3]="MediaCarousel"}(u||(u={})),function(t){t[t.Variation=0]="Variation",t[t.HtmlBlock=1]="HtmlBlock",t[t.Outfit=2]="Outfit"}(d||(d={}));const c=s.styled.div({display:"block",whiteSpace:"nowrap"}),m={left:10,right:10,down:999,up:999};class g extends r.a.PureComponent{constructor(t){super(t),this.lastDeltaX=0,this.container=null,this.willUnmount=!1,this.imagesAreLoaded=!1,this.handleVisibilityChange=()=>{clearInterval(this.autoSlideTimer),document.hidden||this.setUpAutoSlide()},this.onSwipeStart=()=>{this.isResting=!1},this.onSwiping=({deltaX:t})=>{const{translateX:e}=this.state,i=t-this.lastDeltaX;this.lastDeltaX=t,this.setState({translateX:e+i})},this.onSwiped=()=>{this.lastDeltaX=0},this.handleContainerMount=t=>{this.container=t,t&&this.setWidths()},this.onRest=()=>{this.isResting=!0,this.props.onSwipeRest&&this.props.onSwipeRest()};let e=r.a.Children.toArray(this.props.children);t.variant===d.HtmlBlock&&e.length<4&&(e=e.concat(e));const i=this.props.continuous?e.concat(e):e;this.itemCountUnique=e.length,this.itemCountCloned=i.length,this.isResting=!0,this.state={translateX:t.center&&this.props.assumedImageWidth?this.props.assumedImageWidth/2:0,items:i,itemWidths:this.props.assumedImageWidth?Array(e.length).fill(this.props.assumedImageWidth):[],itemWidthsSum:this.props.assumedImageWidth?this.props.assumedImageWidth*e.length:0}}componentDidUpdate(t){const e=t.children!==this.props.children,i=t.slideWidthPercent!==this.props.slideWidthPercent,s=t.assumedImageWidth!==this.props.assumedImageWidth,n=t.currentSlide!==this.props.currentSlide,o=r.a.Children.count(t.children)!==r.a.Children.count(this.props.children);if(n&&!o&&(this.isResting=!!this.props.skipAnimation),e){const t=r.a.Children.toArray(this.props.children),e=this.props.continuous?t.concat(t):t;this.itemCountUnique=t.length,this.itemCountCloned=e.length,this.setState({items:e})}(e||s||i)&&this.setWidths(),(i||n)&&this.setState({translateX:this.getTranslateX(this.props)}),n&&this.setUpAutoSlide()}componentWillUnmount(){clearInterval(this.autoSlideTimer),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),this.willUnmount=!0}setUpAutoSlide(){if(!this.imagesAreLoaded)return;const{autoSlideTime:t}=this.props;"number"==typeof t&&t>0&&void 0!==document.hidden&&(clearInterval(this.autoSlideTimer),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),this.autoSlideTimer=window.setInterval((()=>{this.props.next()}),t))}getTranslateX(t){let e=-(Math.floor(t.currentSlide/this.itemCountUnique)*this.state.itemWidthsSum+this.state.itemWidths.slice(0,t.currentSlide%this.itemCountUnique).reduce(((t,e)=>t+e),0));if(this.props.center){const i=this.state.itemWidths[(t.currentSlide%this.itemCountUnique+this.itemCountUnique)%this.itemCountUnique]||t.assumedImageWidth;i&&(e-=i/2)}return e}getTranslateXString(t){return this.props.center?`calc(${t}px + 50%)`:`${t}px`}slideShouldMoveToFront(t){const e=Math.min(this.props.numberOfVisibleItems||2,this.itemCountUnique-1)||1,i=this.isActiveSlideInFirstHalf(),s=Object(a.a)(this.props.currentSlide,this.itemCountUnique)<e,n=i&&t>=this.itemCountUnique||!i&&t<this.itemCountUnique,r=(i?this.itemCountCloned:this.itemCountUnique)-1-t;return s&&n&&r<e}getSlideTransform(t){if(!this.props.continuous||0===this.state.itemWidthsSum)return 0;let e=Math.floor(this.props.currentSlide/this.itemCountCloned);const i=t<this.itemCountUnique;return!this.isActiveSlideInFirstHalf()&&i&&e++,this.slideShouldMoveToFront(t)&&e--,2*this.state.itemWidthsSum*e}getLoopCount(){return this.itemCountUnique<1?0:Math.floor(this.props.currentSlide/this.itemCountUnique)}isActiveSlideInFirstHalf(){return this.getLoopCount()%2==0}getSpringConfig(){return this.props.animationStyle===u.Gentle?{stiffness:60,damping:15,precision:.01}:this.props.animationStyle===u.Banner?{stiffness:170,damping:70,precision:.01}:this.props.animationStyle===u.MediaCarousel?{stiffness:120,damping:26,precision:.01}:o.presets.noWobble}setWidths(){if(this.container){const t=[],e=this.container.querySelectorAll(".nakd-slide-component");Array.prototype.slice.call(e,0,this.itemCountUnique).forEach((e=>{t.push(new Promise((t=>{const i=e.querySelector("img");function s(){t(e.getBoundingClientRect().width)}if(!i||i.complete)return s();i.onload=s,i.onerror=s})))})),Promise.all(t).then((t=>{this.willUnmount||(this.imagesAreLoaded=!0,this.setState({itemWidths:t,itemWidthsSum:t.reduce(((t,e)=>t+e),0)},(()=>{this.setState({translateX:this.getTranslateX(this.props)})})),this.setUpAutoSlide())}))}}render(){const t={translateX:this.isResting?this.state.translateX:Object(o.spring)(this.state.translateX,this.getSpringConfig())},e=this.props.SlideComponent;return r.a.createElement(p,{ref:this.handleContainerMount,onSwipeStart:this.onSwipeStart,onSwiping:this.onSwiping,onSwiped:this.onSwiped,onSwipedLeft:this.props.next,onSwipedRight:this.props.prev,delta:m,preventScrollOnSwipe:!0},r.a.createElement(o.Motion,{style:t,onRest:this.onRest},(t=>r.a.createElement(c,{className:this.props.className,css:this.props.compose(),style:{transform:`translateX(${this.getTranslateXString(this.isResting?this.state.translateX:t.translateX)})`}},this.state.items.map(((t,i)=>r.a.createElement(e,{key:i,className:"nakd-slide-component",style:Object.assign({WebkitTapHighlightColor:"transparent",transform:`translateX(${this.getSlideTransform(i)}px)`},this.props.variant!==d.Variation&&this.props.variant!==d.Outfit&&{width:`${this.props.slideWidthPercent}%`})},t)))))))}}e.c=Object(s.styled)(Object(s.forwardStyle)(g))}}]);